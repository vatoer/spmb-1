generator client {
  provider      = "prisma-client-js"
  binaryTargets = ["native", "debian-openssl-3.0.x"]
  output        = "../../node_modules/@prisma-db-spmb/client"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL_SPMB")
}

model Pendaftaran {
  id        String    @id @default(cuid())
  userId    String    @map("user_id") @db.VarChar
  createdAt DateTime  @default(now()) @map("created_at") @db.Timestamp(6)
  updatedAt DateTime? @default(now()) @map("updated_at") @db.Timestamp(6)
  status    String?   @db.VarChar

  calonMuridId String?     @map("calon_murid_id") @db.VarChar
  calonMurid   CalonMurid? @relation(fields: [calonMuridId], references: [id])

  @@map("pendaftaran")
}

model CalonMurid {
  id                        String        @id @default(cuid())
  nama                      String        @db.VarChar
  kewarganegaraan           String        @db.VarChar
  keteranganKewarganegaraan String?       @map("keterangan_kewarganegaraan") @db.VarChar
  nisn                      String?       @db.VarChar
  kk                        String?       @db.VarChar
  nik                       String?       @db.VarChar
  paspor                    String?       @db.VarChar
  tempatLahir               String?       @map("tempat_lahir") @db.VarChar
  tanggalLahir              DateTime      @map("tanggal_lahir") @db.Date
  jenisKelamin              String        @map("jenis_kelamin") @db.VarChar
  agama                     String        @db.VarChar
  golonganDarah             String?       @map("golongan_darah") @db.VarChar
  jenjangDikdasmen          String        @map("jenjang_dikdasmen") @db.VarChar
  mapCoordinates            String?       @map("map_coordinates") @db.VarChar
  statusDomisili            String        @map("status_domisili") @db.VarChar
  wilayahAdministratifId    String        @map("wilayah_administratif_id") @db.VarChar // tingkat desa/kelurahan
  alamat                    String        @db.VarChar
  rt                        String?       @db.VarChar
  rw                        String?       @db.VarChar
  ibuId                     String?       @map("ibu_id") @db.VarChar
  ibu                       OrangTua?     @relation("IbuRelation", fields: [ibuId], references: [id])
  ayahId                    String?       @map("ayah_id") @db.VarChar
  ayah                      OrangTua?     @relation("AyahRelation", fields: [ayahId], references: [id])
  createdAt                 DateTime?     @default(now()) @map("created_at") @db.Timestamp(6)
  updatedAt                 DateTime?     @default(now()) @map("updated_at") @db.Timestamp(6)
  pendaftaran               Pendaftaran[]
  userId                    String        @map("user_id") @db.VarChar

  @@map("calon_murid")
}

model WilayahAdministratif {
  id         String                 @id
  nama       String                 @db.VarChar
  indukId    String?                @map("induk_id") @db.VarChar
  tingkat    Int                    @default(1)
  induk      WilayahAdministratif?  @relation("IndukRelation", fields: [indukId], references: [id])
  subWilayah WilayahAdministratif[] @relation("IndukRelation")

  @@map("wilayah_administratif")
}

model Pekerjaan {
  id           String      @id
  nama         String      @db.VarChar
  indukId      String?     @map("induk_id") @db.VarChar
  induk        Pekerjaan?  @relation("IndukRelation", fields: [indukId], references: [id])
  subPekerjaan Pekerjaan[] @relation("IndukRelation")
  OrangTua     OrangTua[]

  @@map("pekerjaan")
}

model RentangPendapatan {
  id           String     @id
  nama         String     @db.VarChar
  rentangBawah Int        @map("rentang_bawah")
  rentangAtas  Int        @map("rentang_atas")
  createdAt    DateTime   @default(now()) @map("created_at") @db.Timestamp(6)
  updatedAt    DateTime?  @default(now()) @map("updated_at") @db.Timestamp(6)
  OrangTua     OrangTua[]

  @@map("rentang_penghasilan")
}

model OrangTua {
  id                String             @id @default(cuid())
  nama              String             @db.VarChar
  nik               String?            @db.VarChar
  kk                String?            @db.VarChar
  jenisKelamin      String             @map("jenis_kelamin") @db.VarChar
  tahunWafat        Int?               @map("tahun_wafat")
  jenjangPendidikan String             @map("jenjang_pendidikan") @db.VarChar
  pekerjaanId       String?            @map("pekerjaan_id") @db.VarChar
  pekerjaan         Pekerjaan?         @relation(fields: [pekerjaanId], references: [id])
  pendapatanId      String?            @map("pendapatan_id") @db.VarChar
  pendapatan        RentangPendapatan? @relation(fields: [pendapatanId], references: [id])
  anakIbu           CalonMurid[]       @relation("IbuRelation")
  anakAyah          CalonMurid[]       @relation("AyahRelation")
  userId            String             @map("user_id") @db.VarChar

  createdAt DateTime? @default(now()) @map("created_at") @db.Timestamp(6)
  updatedAt DateTime? @default(now()) @map("updated_at") @db.Timestamp(6)

  @@map("orang_tua")
}
